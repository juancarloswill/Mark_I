# ================================
# CONFIGURACIÓN GENERAL DEL PROYECTO (VALIDADA)
# ================================

# Símbolo principal para MT5 y reportes
simbolo: "EURUSD"
# Símbolo adicional (opcional) para comparativos o exógenas
simbolo_spy: "US500"

# Timeframe nativo a descargar desde MT5 (siempre D1)
timeframe: "D1"

# Cantidad de barras crudas a traer desde MT5 antes de recortes/resampleo
cantidad_datos: 1500

# Credenciales/ruta MT5 (si ya las maneja Basic_funcs en otro lugar, puedes dejarlas aquí igual)
mt5:
  login: 68238343
  password: "Colombia123*"
  server: "RoboForex-Pro"
  path: "C:\\Program Files\\RoboForex - MetaTrader 5\\terminal64.exe"

# ================================
# EDA / PREPROCESO
# ================================
eda:
  # Frecuencia a la que se estandariza la serie de cierre
  # Para D1, déjalo en "D" (no cambia granularidad, solo estandariza interfaz)
  frecuencia_resampleo: "D"

# ================================
# RECORTE DE DATOS PARA TRABAJO
# ================================
data_window:
  # Modo de recorte de datos de trabajo antes de split train/test
  # - last_n_bars: toma las últimas n_bars
  # - date_range:  usa el rango [start, end]
  mode: "last_n_bars"
  n_bars: 1000
  start: null        # "2022-01-01"
  end: null          # "2024-12-31"

# ================================
# BACKTEST / SEÑALES
# ================================
bt:
  target: "returns"          # "returns" o "price"
  pip_size: 0.0001
  threshold_mode: "fixed"    # fixed/ATR/GARCH (si tu exportador soporta)
  threshold_pips: 12         # umbral en pips para convertir predicción a señal {1,0,-1}

# ================================
# SPLIT DE VALIDACIÓN (HOLD-OUT FINAL)
# ================================
validacion:
  # Define el bloque TEST que usa test_y_ejecucion.py
  # - last_n:       usa las últimas n observaciones como TEST
  # - date_range:   usa el rango [start, end] como TEST
  modo: "last_n"
  n: 300
  start: null
  end: null

# ================================
# LISTA DE MODELOS Y SUS PARÁMETROS (fuente ÚNICA de hiperparámetros)
# ================================
modelos:
  - name: "ARIMA"
    params:
      seasonal: false       # pon true si detectas estacionalidad
      stepwise: true
      max_p: 2
      max_q: 2
      max_P: 1
      max_Q: 1
      max_order: 4
      suppress_warnings: true

  - name: "PROPHET"
    params:
      yearly_seasonality: false
      weekly_seasonality: false
      daily_seasonality: false  # En D1 no es usual daily_seasonality
      changepoint_prior_scale: 0.05
      n_changepoints: 10

  - name: "LSTM"
    params:
      window: 64            # tamaño de ventana para features
      epochs: 10            # súbelo si necesitas más ajuste (ojo al costo)
      batch_size: 32

# ================================
# AGENTE (VALIDACIÓN Y DECISIÓN)
# ================================
agent:
  validation:
    # Cada cuántos pasos del rolling refitear si el modelo no soporta update()
    refit_stride: 20

  decision:
    da_proceed: 0.55        # 55%
    da_proceed_lo: 0.53     # si N_test grande (>= 1000)
    rmse_gain: 0.90         # RMSE <= 0.90 * RMSE_baseline
    dm_p_proceed: 0.10
    dm_p_watch: 0.20
    n_min_test: 200
    atr_cap_mult: 2.0

# ================================
# REPORTES / SALIDAS
# ================================
reportes:
  outdir_backtest: "outputs/backtest_plots"
  outdir_validacion: "outputs/validacion"
  excel_validacion: "validacion_consolidado.xlsx"
